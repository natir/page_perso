<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <link rel="stylesheet" href="css/pure/pure-min.css">
    <link rel="stylesheet" href="css/layouts/blog.css">
    <link rel="stylesheet" href="css/fonts/fork_awesome/css/fork-awesome.min.css">
    <link rel="stylesheet" href="css/fonts/academicons/css/academicons.min.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <meta name="twitter:card" content="player">
    <meta name="twitter:site" content="@Natir_chan">
    <meta name="twitter:title" content="Interactive graph for choose parameter">
    <meta name="twitter:description" content="Interactive graph for choose optimal parameter of me tools Yacrd">
    <meta name="twitter:player" content="https://pierre.marijon.fr/yacrd_opt_param.html">
    <meta name="twitter:player:width" content="800">
    <meta name="twitter:player:height" content="600">
    <meta name="twitter:image" content="https://pierre.marijon.fr/yacrd_opt_param.png">
  </head>
  <body>
    <div id="graph"><div>
	
	<script>
	  function get_z_value(rows, name) {
	      var max = 0;

	      var x = [];
	      var y = [];
	      var z = [];	      
	      for(var i = 0; i < rows.length; i++) {
		  var row = rows[i];
		  var val = parseInt(row[name]);
		  
		  if(val > max) {
		      max = val;
		  }

		  x.push(row.g);
		  y.push(row.c);
		  z.push(val);
	      }

	      var data = {
		  x: x,
		  y: y,
		  z: z.map(b => b / max),
		  type: 'scatter3d',
		  mode: 'markers',
		  marker: {
		      symbol: "circle",
		      size: 3,
		  },
		  name: name,
	      };

	      return data;
	  }
	  
	  Plotly.d3.csv('data_pb.csv', function(err, rows){
	      var chimera = get_z_value(rows, "chimera_nb");
	      var sequences = get_z_value(rows, "nb_sequence");
	      var bases = get_z_value(rows, "nb_base");
	      var m_NGA50 = get_z_value(rows, "m_NGA50");
	      var m_tt_length = get_z_value(rows, "m_tt_length");
	      var m_nb_contig = get_z_value(rows, "m_nb_contig");
	      var m_indels = get_z_value(rows, "m_indels_per_100kb");
	      var m_mismatchs = get_z_value(rows, "m_mismatchs_per_100kb");
	      var m_misassembly = get_z_value(rows, "m_misassembly");
	      var w_NGA50 = get_z_value(rows, "w_NGA50");
	      var w_tt_length = get_z_value(rows, "w_tt_length");
	      var w_nb_contig = get_z_value(rows, "w_nb_contig");
	      var w_indels = get_z_value(rows, "w_indels_per_100kb");
	      var w_mismatchs = get_z_value(rows, "w_mismatchs_per_100kb");
	      var w_misassembly = get_z_value(rows, "w_misassembly");
	      
	      var layout = {
		  title: '',
		  autosize: false,
		  showlegend: true,
		  legend: {
		  	x: 0,
			y: 1,
		  },
		  margin: {
		  	l:0,
			r:0,
		  	b:0,
		  	t:0
		  },
		  width: 800,
		  height: 600,
		  scene: {
		      aspectmode: "manual", 
		      xaxis: {
			  title: {
			      text: 'g',
			  },
		      },
		      yaxis: {
			  title: {
			      text: 'c'
			  },
//			  range: [0, 8],
		      },
		      zaxis: {
			  title: {
			      text: 'value'
			  },
		      },
		  },
	      };
	      
	      Plotly.newPlot('graph', [chimera, sequences, bases, m_NGA50, m_tt_length, m_nb_contig, m_indels, m_mismatchs, m_misassembly, w_NGA50, w_tt_length, w_nb_contig, w_indels, w_mismatchs, w_misassembly], layout);
	  });
	</script>
  </body>
</html>
